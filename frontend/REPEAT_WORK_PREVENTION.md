# 🔄 반복 작업 방지 가이드라인

## 🎯 목적

이 문서는 Cursor AI와의 채팅에서 반복 작업을 방지하고 효율적인 개발을 위한 가이드라인입니다.

---

## 🚨 반복 작업 발생 원인

### 1. **파일 상태 파악 부족**

- 전체 파일을 읽지 않고 부분적으로만 수정 시도
- 기존 코드와의 호환성 미고려
- 의존성 관계 미파악

### 2. **동시 수정 시 충돌**

- 여러 파일을 동시에 수정할 때 서로 간섭
- 한 파일의 변경이 다른 파일의 수정을 무효화
- 변경사항이 누적되어 복잡해짐

### 3. **테스트 실행 부족**

- 수정 후 즉시 테스트를 실행하지 않아 문제 발견 지연
- 작은 오류가 누적되어 큰 문제로 발전

### 4. **🆕 도구 사용 시 정확성 부족**

- `edit_file` 도구 사용 시 전체 컨텍스트 미고려
- `search_replace` 도구 사용 시 정확한 위치 식별 실패
- 부분적 수정으로 인한 기존 코드 손상

### 5. **🆕 수정 전후 상태 검증 부족**

- 수정 전 현재 상태를 정확히 파악하지 못함
- 수정 후 변경사항이 의도한 대로 적용되었는지 확인하지 않음
- 연관된 파일들의 영향도 미고려

### 6. **🆕 사용자 요청 범위 초과**

- 사용자가 요청하지 않은 작업을 추가로 실행
- 과도한 추론으로 인한 불필요한 수정
- 명확하지 않은 요청에 대한 추측적 해결

---

## 💡 올바른 접근 방법

### **1단계: 현재 상태 파악**

```bash
# 전체 파일들을 읽어서 현재 상태 확인
read_file로 관련 파일들 전체 읽기
```

### **2단계: 변경 계획 수립**

- 어떤 부분을 수정할지 명확히 정의
- 다른 파일에 미치는 영향 고려
- 변경 순서 결정

### **3단계: 단계별 수정**

- 한 번에 하나의 작은 변경
- 각 변경 후 테스트 실행
- 문제 발견 시 즉시 수정

### **🆕 4단계: 사용자 요청 범위 확인**

- 사용자가 요청한 작업만 수행
- 추가 작업이 필요한 경우 사용자에게 확인
- 추측적 해결 방지

### **🆕 5단계: 수정 전후 상태 검증**

- 수정 전: 현재 파일 상태 정확히 파악
- 수정 후: 변경사항이 의도한 대로 적용되었는지 확인
- 연관 파일: 다른 파일에 영향이 없는지 확인

---

## 🔧 Cursor 도구 사용 가이드

### **read_file 도구**

- 수정 전에 반드시 전체 파일 읽기
- 파일의 전체 맥락 파악
- 기존 코드 구조 이해

### **edit_file 도구**

- 전체 파일을 읽은 후에만 사용
- 정확한 위치 식별 후 수정
- 한 번에 하나의 변경만 적용

### **search_replace 도구**

- 정확한 컨텍스트 확인 후 사용
- 비슷한 패턴이 여러 곳에 있는지 확인
- 변경 전후 상태 검증

### **🆕 도구 사용 시 추가 주의사항**

- **수정 전 상태 백업**: `git stash` 또는 현재 상태 스크린샷
- **정확한 위치 식별**: 수정할 정확한 라인과 컨텍스트 확인
- **단계별 검증**: 각 수정 후 즉시 파일 상태 확인
- **의존성 체크**: 수정한 파일이 다른 파일에 미치는 영향 확인
- **🆕 사용자 요청 범위 준수**: 요청받은 작업만 수행

---

## 📋 작업 체크리스트

### **수정 전**

- [ ] 관련 파일들 전체 읽기
- [ ] 현재 상태 파악
- [ ] 변경 계획 수립
- [ ] 백업 생성 (`git stash`)
- [ ] **🆕 사용자 요청 범위 확인**

### **수정 중**

- [ ] 한 번에 하나의 작은 변경
- [ ] 정확한 위치 식별
- [ ] 다른 파일 영향 고려
- [ ] 즉시 테스트 실행
- [ ] **🆕 요청받은 작업만 수행**

### **수정 후**

- [ ] 관련 테스트 통과 확인
- [ ] 브라우저에서 동작 확인
- [ ] 기존 기능 보존 확인
- [ ] 문서 업데이트
- [ ] **🆕 사용자에게 결과 보고**

### **🆕 수정 전후 상태 검증**

- [ ] 수정 전 파일 상태 정확히 파악
- [ ] 수정 후 변경사항 의도대로 적용 확인
- [ ] 연관 파일 영향도 확인
- [ ] 전체 테스트 스위트 실행

---

## 🛠️ 문제 해결 워크플로우

### **1. 문제 식별**

```bash
# 현재 상태 확인
npm run dev
# 브라우저에서 문제 확인
```

### **2. 관련 파일 분석**

```bash
# 관련 파일들 전체 읽기
read_file로 전체 파일 읽기
# 의존성 관계 파악
```

### **3. 변경 계획**

- 문제의 정확한 원인 파악
- 수정할 파일과 위치 결정
- 변경 순서 계획

### **4. 단계별 수정**

```bash
# 1단계: 작은 변경
# 2단계: 테스트 실행
npm run test:run
# 3단계: 다음 변경 (필요시)
```

### **5. 검증**

```bash
# 전체 테스트 실행
npm run protection-check
# 브라우저 확인
npm run dev
```

### **🆕 6. 사용자 요청 범위 확인**

```bash
# 요청받은 작업만 수행했는지 확인
# 추가 작업이 필요한 경우 사용자에게 확인
# 결과를 사용자에게 명확히 보고
```

---

## 🚀 효율적인 채팅 방법

### **질문 시**

- 구체적인 문제 설명
- 현재 상태 명시
- 원하는 결과 명확히 제시

### **답변 시**

- 전체 파일 읽기부터 시작
- 단계별 접근 제안
- 각 단계마다 검증 방법 제시
- **🆕 요청받은 작업만 수행**

### **문제 발생 시**

- 즉시 중단하고 상태 확인
- 원인 분석 후 재시도
- 필요시 백업에서 복원

### **🆕 부드러운 명령 수행을 위한 추가 지침**

- **명령 실행 전**: 현재 상태 정확히 파악
- **명령 실행 중**: 각 단계마다 검증
- **명령 실행 후**: 결과 확인 및 피드백
- **문제 발생 시**: 즉시 중단하고 원인 분석
- **🆕 사용자 요청 범위**: 요청받은 작업만 수행

---

## 📝 사용 예시

### **채팅 시작 시**

```
안녕하세요!
현재 세션셀에서 학생 이름이 잘리는 문제가 있습니다.
REPEAT_WORK_PREVENTION.md 가이드라인에 따라 해결해주세요.
```

### **문제 해결 시**

```
1단계: 관련 파일들 전체 읽기
2단계: 문제 원인 분석
3단계: 단계별 수정
4단계: 검증
```

### **🆕 부드러운 명령 수행 예시**

```
안녕하세요!
현재 세션셀 높이를 조정하고 싶습니다.
REPEAT_WORK_PREVENTION.md 가이드라인에 따라 단계별로 진행해주세요.
각 단계마다 결과를 확인하고 다음 단계로 진행해주세요.
```

### **🆕 사용자 요청 범위 확인 예시**

```
사용자: "세션셀 높이를 줄여주세요"
응답: "세션셀 높이만 줄이는 작업을 수행하겠습니다.
다른 관련 수정이 필요한 경우 먼저 확인하겠습니다."
```

---

## 🎯 핵심 원칙

1. **전체 파일 읽기 우선**
2. **단계별 접근**
3. **즉시 테스트 실행**
4. **문제 발견 시 즉시 수정**
5. **백업 생성 후 작업**

### **🆕 추가 핵심 원칙**

6. **수정 전후 상태 검증**
7. **정확한 위치 식별**
8. **단계별 결과 확인**
9. **문제 발생 시 즉시 중단**
10. **의존성 관계 고려**
11. **🆕 사용자 요청 범위 준수**
12. **🆕 불필요한 작업 방지**

---

## 🚨 반복 작업 방지 체크리스트

### **수정 전**

- [ ] 전체 파일 읽기 완료
- [ ] 현재 상태 정확히 파악
- [ ] 변경 계획 수립
- [ ] 백업 생성 (`git stash`)
- [ ] **🆕 사용자 요청 범위 확인**

### **수정 중**

- [ ] 정확한 위치 식별
- [ ] 한 번에 하나의 작은 변경
- [ ] 각 변경 후 즉시 검증
- [ ] 의존성 관계 확인
- [ ] **🆕 요청받은 작업만 수행**

### **수정 후**

- [ ] 변경사항 의도대로 적용 확인
- [ ] 연관 파일 영향도 확인
- [ ] 전체 테스트 스위트 실행
- [ ] 브라우저에서 동작 확인
- [ ] **🆕 사용자에게 결과 보고**

---

## 🚫 사용자 요청 범위 초과 방지 규칙

### **1. 명확한 요청 확인**

- 사용자가 요청한 작업을 정확히 파악
- 모호한 요청의 경우 추가 확인
- 추측적 해결 방지

### **2. 단계별 확인**

- 각 단계마다 사용자에게 확인
- 추가 작업이 필요한 경우 명시적 동의 요청
- 예상치 못한 수정 사전 알림

### **3. 결과 보고**

- 수행한 작업을 명확히 보고
- 추가로 수행한 작업이 있다면 이유 설명
- 다음 단계 제안 시 사용자 동의 요청

---

_이 문서를 채팅할 때마다 참고하여 반복 작업을 방지하고 효율적인 개발을 진행하세요._
